<!doctype html>
<html ng-app="johnmodule">
  <head>
    <title>Chat history</title>
     <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
     <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.min.js"></script>
     <script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular-resource.min.js"></script>
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; }
    </style>
  </head>
 
<script>
  
    var johnmodule = angular.module("johnmodule", ["ngResource"]);
    johnmodule.controller("maincontroller", function($scope, $resource){
        var resource = $resource('/conversation/:id', { id:"@id"});
        $scope.convs = resource.query();
        $scope.delete = function(c){
            $scope.convs.splice(c, 1);
            c.$delete();
            console.log("deleted ",c);
          
        }
        
        
      });
  
    
   //   $.ajax( { url:'/conversations/all', dataType:'json', cache:false,success: function(data){
        
  
</script>

  <body ng-controller="maincontroller">
    <h1>Chat history</h1>
    <ul ng-repeat="c in convs" id="messages">
         <li>{{c.user}} said at {{c.time | date:"dd-MM-yyyy HH:mm"}} : {{c.message}} <button ng-click="delete(c)">delete</button></li>
    </ul>
    
    <a href="/">Back to the chat..</a>
    <a href="/Conversations/delete">Clear all data..</a>
  </body>
</html>